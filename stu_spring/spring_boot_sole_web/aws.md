# AWS 서버 환경 만들기

### 클라우드 서비스

- 24시간 작동하는 서버
  - 24시간 집 PC 구동
    - 저렴함
  - 호스팅 서비스 이용
    - 저렴함
  - 클라우드 서비스 이용
    - 유동적으로 사양을 늘릴 수 있음

- 클라우드 서비스의 종류

  - Infrastructure as a Service(IaaS)
    - 물리장비를 미들웨어와 묶어둔 추상화 서비스 이다.
    - 가상머신, 스토리지, 운영체제 등 IT 인프라를 대여해 주는 서비스
    - 대표적으로 EC2가 있다.
  - Platform as a Service(PaaS)
    - IaaS를 한번 더 추상화한 서비스
    - 자동화된 기능이 많다
    - 대표적으로 헤로쿠가 있다.
  - Software as a Service(Saas)
    - 소프트웨어 서비스
    - 대표적으로 구글 드라이브가 있다.

- AWS를 선택하는 이유

  - 단순히 서버 장비를 대여하는 것이 아니다.
  - 로그 관리, 하드웨어 교체, 네트워크 관리 등 기본적인 모든 것을 지원한다.
  - 1년간 대부분 무료이다.
  - 소규모일때 개발에 집중할 수 있다.
  - 클라우드를 사용하는 대부분의 기업들이 AWS를 이용한다.
  - AWS 사용 경험은 취직/이직 때 많은 도움이 된다.

  - 커뮤니티가 활성화 되어 있다.

- IaaS를 이용하는 이유
  - PaaS인 빈스톡을 이용할 수 있지만, 프리티어(무료)로 무중단 배포를 할 수 없다.
  - 그렇기 때문에 IaaS를 이용한다.

### EC2 인스턴스 생성하기

- 프리티어 제한
  - 사양 제한이 t2.micro이다.
    - vCPU 1코어, 메모리 1GB
    - vCPU는 그냥 CPU의 절반 정도의 성능
  - 월 750시간 제한(초과시 요금 발생)
    - 한달은 744시간 이기 때문에 만약 EC2가 하나라면 1달 내내 구동할 수 있다.

- 리전 확인

  - 실제 서비스될 지역과 가까울수록 빠르다.
  - 국내에서 서비스할 경우 서울로 골라야 한다.

- 생성하기

  - EC2 대시보드를 들어간다.

  - 인스턴스 시작을 누른다.

  - 아마존 리눅스 1 AMI를 선택한다.

    - AMI란 필요한 정보를 이미지로 만들어 둔 것이다.
    - 가상머신에 운영체제를 설치하도록 구운 이미지이다.
    - 아마존 리눅스 1 AMI를 이용하는 이유는 아직 국내 자료가 1이 더 많기 때문이다.
    - 센토스 AMI를 이용하지 않는 이유
      - 아마존이 개발하기 때문에 지원받기 쉽다.
      - AWS의 서비스와 상성이 좋다.
      - AWS의 독자적인 레포를 사용하기 때문에 yum이 매우 빠르다.

  - 인스턴스 유형은 t2.micro를 선택한다.

    - t2는 요금 타입이란 뜻이다.
    - t 시리즈는 크레딧 이라는 포인트를 이용한다.
      - CPU를 사용하지 않을 때 포인트가 쌓이고, CPU를 사용할 때 포인트를 사용한다.
      - 높은 트래픽이 오면 크레딧을 더 사용한다.
      - 크레딧을 모두 사용하면 EC2를 사용할 수 없다.

  - 세부 정보 구성은 연습할 때엔 굳이 필요 없으니 넘어간다.

    - 네트워크 환경 구성 등 세세한 정보를 다룬다.
    - 하지만 소규모/개인/공부 라면 굳이 설정할 필요 없다.

  - 스토리지 선택은 서버의 용량을 설정하는 단계이다.

    - 기본값이 8GB이지만, 프리티어 최대치는 30GB 이므로 30GB로 바꿔준다.

  - 태그는 웹 콘솔에 표시될 이름이다.

    - 인스턴스가 여러개 일때, 태그로 검색이나 그룹이 편하기 때문에, 원하는 만큼 등록하면 된다.

  - 보안 그룹은 방화벽을 이야기 한다.

    - 기본적으로는 80포트를 제외하고 허용하지 않는다.
    - 굉장히 중요하다. 만약 모두 열어버린다면 pem 파일(키)가 유출되는 순간, 모든 보안이 뚫리게 되므로, 다음과 같이 설정해 준다.
    - ![image-20210119115745928](C:\Users\with\AppData\Roaming\Typora\typora-user-images\image-20210119115745928.png)
    - SSH에 22포트는 터미널로 접속하는 경우인데, 내 아이피로 설정하고, 만약 카페와 같은곳을 가게 되면 그곳의 아이피를 추가하는것이 좋다.

  - 다음을 눌렀을 때 보안 그룹 경고를 하는데, 8080포트를 여는것은 위험하지 않으니 시작하기를 누른다.

  - pem 파일을 저장할 수 있는데, 절대 유출하면 안된다.

    - 마스터키와 같은 역할이기 때문에, EC2 서버 접속에 필수적인 파일이다.
    - 잘 보관해야 한다.

    